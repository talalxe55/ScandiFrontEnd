{"ast":null,"code":"import _defineProperty from \"C:\\\\xampp\\\\htdocs\\\\scandibackend\\\\scandi-react-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\scandibackend\\\\scandi-react-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\scandibackend\\\\scandi-react-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\scandibackend\\\\scandi-react-app\\\\src\\\\pages\\\\ProductList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ProductGrid from \"../components/ProductGrid\";\nexport default function ProductList() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      allProducts = _useState2[0],\n      setAllProducts = _useState2[1];\n\n  var _useState3 = useState({\n    product_ids: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedProducts = _useState4[0],\n      setSelectedProducts = _useState4[1];\n\n  useEffect(function () {\n    fetch(\"https://scandi-backend.funnelpageinc.com\").then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setAllProducts(data);\n    });\n  }, []);\n\n  function handleDeleteClick() {\n    if (selectedProducts.product_ids.length > 0) {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      var urlencoded = new URLSearchParams();\n\n      for (var index = 0; index < selectedProducts.product_ids.length; index++) {\n        urlencoded.append(\"product_ids[\".concat(index, \"]\"), selectedProducts.product_ids[index]);\n      }\n\n      var requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: \"follow\"\n      };\n      fetch(\"https://scandi-backend.funnelpageinc.com/index.php/delete/\", requestOptions).then(function (response) {\n        return response.text();\n      }).then(function (result) {\n        var productIds = selectedProducts.product_ids;\n        console.log(productIds);\n        console.log(allProducts); // Filter out all the deleted IDs (leave the ones that are not deleted)\n\n        var newProductList = allProducts.filter(function (product) {\n          if (productIds.includes(product.id)) {\n            console.log(productIds.includes(product.id));\n            return false;\n          } else {\n            return true;\n          }\n        }); // Empty out the selected Product list\n\n        setSelectedProducts({\n          product_ids: []\n        });\n        setAllProducts(newProductList);\n      }).catch(function (error) {\n        return console.log(\"error\", error);\n      });\n    }\n  }\n\n  function handleCheckboxChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value,\n        type = _event$target.type,\n        checked = _event$target.checked;\n    var selectedProduct_ids = selectedProducts.product_ids;\n    selectedProduct_ids.push(value);\n\n    var newSelectedProducts = _objectSpread({}, selectedProducts, _defineProperty({}, name, selectedProduct_ids));\n\n    setSelectedProducts(newSelectedProducts);\n  }\n\n  var productElementGrid = allProducts.map(function (product) {\n    return /*#__PURE__*/React.createElement(ProductGrid, {\n      key: product.id,\n      id: product.ID,\n      sku: product.sku,\n      name: product.name,\n      price: product.price,\n      attribute: product.product_attribute_value,\n      runHandleCheckboxChange: handleCheckboxChange,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Product List\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/add-product\",\n    id: \"add_button\",\n    className: \"btn btn-success btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"ADD\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"delete-product-btn\",\n    className: \"btn btn-danger btn-sm\",\n    onClick: handleDeleteClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, \"MASS DELETE\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    id: \"product_list_form\",\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, allProducts.length >= 1 && productElementGrid))));\n}","map":{"version":3,"names":["React","useEffect","useState","Link","ProductGrid","ProductList","allProducts","setAllProducts","product_ids","selectedProducts","setSelectedProducts","fetch","then","response","json","data","handleDeleteClick","length","myHeaders","Headers","append","urlencoded","URLSearchParams","index","requestOptions","method","headers","body","redirect","text","result","productIds","console","log","newProductList","filter","product","includes","id","catch","error","handleCheckboxChange","event","target","name","value","type","checked","selectedProduct_ids","push","newSelectedProducts","productElementGrid","map","ID","sku","price","product_attribute_value"],"sources":["C:/xampp/htdocs/scandibackend/scandi-react-app/src/pages/ProductList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProductGrid from \"../components/ProductGrid\";\r\n\r\nexport default function ProductList() {\r\n  const [allProducts, setAllProducts] = useState([]);\r\n\r\n  const [selectedProducts, setSelectedProducts] = useState({\r\n    product_ids: [],\r\n  });\r\n\r\n  useEffect(function() {\r\n    fetch(\"https://scandi-backend.funnelpageinc.com\")\r\n      .then((response) => response.json())\r\n      .then((data) => setAllProducts(data));\r\n  }, []);\r\n\r\n  function handleDeleteClick() {\r\n    if (selectedProducts.product_ids.length > 0) {\r\n      const myHeaders = new Headers();\r\n      myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n      let urlencoded = new URLSearchParams();\r\n      for (\r\n        let index = 0;\r\n        index < selectedProducts.product_ids.length;\r\n        index++\r\n      ) {\r\n        urlencoded.append(\r\n          `product_ids[${index}]`,\r\n          selectedProducts.product_ids[index]\r\n        );\r\n      }\r\n\r\n      const requestOptions = {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: urlencoded,\r\n        redirect: \"follow\",\r\n      };\r\n\r\n      fetch(\"https://scandi-backend.funnelpageinc.com/index.php/delete/\", requestOptions)\r\n        .then((response) => response.text())\r\n        .then((result) => {\r\n          const productIds = selectedProducts.product_ids;\r\n          console.log(productIds);\r\n          console.log(allProducts);\r\n          // Filter out all the deleted IDs (leave the ones that are not deleted)\r\n          const newProductList = allProducts.filter((product) => {\r\n            if (productIds.includes(product.id)) {\r\n              console.log(productIds.includes(product.id));\r\n              return false;\r\n            } else {\r\n              return true;\r\n            }\r\n          });\r\n\r\n          // Empty out the selected Product list\r\n          setSelectedProducts({ product_ids: [] });\r\n          setAllProducts(newProductList);\r\n        })\r\n        .catch((error) => console.log(\"error\", error));\r\n    }\r\n  }\r\n\r\n  function handleCheckboxChange(event) {\r\n    const { name, value, type, checked } = event.target;\r\n\r\n    let selectedProduct_ids = selectedProducts.product_ids;\r\n    selectedProduct_ids.push(value);\r\n    const newSelectedProducts = {\r\n      ...selectedProducts,\r\n      [name]: selectedProduct_ids,\r\n    };\r\n    setSelectedProducts(newSelectedProducts);\r\n  }\r\n\r\n  const productElementGrid = allProducts.map((product) => {\r\n    return (\r\n      <ProductGrid\r\n        key={product.id}\r\n        id={product.ID}\r\n        sku={product.sku}\r\n        name={product.name}\r\n        price={product.price}\r\n        attribute={product.product_attribute_value}\r\n        runHandleCheckboxChange={handleCheckboxChange}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container\">\r\n        <div className=\"fixed-header\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-7\">\r\n              <h1>\r\n                <b>Product List</b>\r\n              </h1>\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <Link\r\n                to=\"/add-product\"\r\n                id=\"add_button\"\r\n                className=\"btn btn-success btn-sm\"\r\n              >\r\n                ADD\r\n              </Link>\r\n            </div>\r\n            <div className=\"col-md-3\">\r\n              <button\r\n                id=\"delete-product-btn\"\r\n                className=\"btn btn-danger btn-sm\"\r\n                onClick={handleDeleteClick}\r\n              >\r\n                MASS DELETE\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n        </div>\r\n        {/* <!-- beneath the header -->*/}\r\n\r\n        <form action=\"\" id=\"product_list_form\" method=\"post\">\r\n          <div className=\"flex-container\">\r\n            {/* ProductGrid */}\r\n\r\n            {allProducts.length >= 1 && productElementGrid}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AAEA,eAAe,SAASC,WAAT,GAAuB;EAAA;;EAAA,gBACEH,QAAQ,CAAC,EAAD,CADV;EAAA;EAAA,IAC7BI,WAD6B;EAAA,IAChBC,cADgB;;EAAA,iBAGYL,QAAQ,CAAC;IACvDM,WAAW,EAAE;EAD0C,CAAD,CAHpB;EAAA;EAAA,IAG7BC,gBAH6B;EAAA,IAGXC,mBAHW;;EAOpCT,SAAS,CAAC,YAAW;IACnBU,KAAK,CAAC,0CAAD,CAAL,CACGC,IADH,CACQ,UAACC,QAAD;MAAA,OAAcA,QAAQ,CAACC,IAAT,EAAd;IAAA,CADR,EAEGF,IAFH,CAEQ,UAACG,IAAD;MAAA,OAAUR,cAAc,CAACQ,IAAD,CAAxB;IAAA,CAFR;EAGD,CAJQ,EAIN,EAJM,CAAT;;EAMA,SAASC,iBAAT,GAA6B;IAC3B,IAAIP,gBAAgB,CAACD,WAAjB,CAA6BS,MAA7B,GAAsC,CAA1C,EAA6C;MAC3C,IAAMC,SAAS,GAAG,IAAIC,OAAJ,EAAlB;MACAD,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAiC,mCAAjC;MAEA,IAAIC,UAAU,GAAG,IAAIC,eAAJ,EAAjB;;MACA,KACE,IAAIC,KAAK,GAAG,CADd,EAEEA,KAAK,GAAGd,gBAAgB,CAACD,WAAjB,CAA6BS,MAFvC,EAGEM,KAAK,EAHP,EAIE;QACAF,UAAU,CAACD,MAAX,uBACiBG,KADjB,QAEEd,gBAAgB,CAACD,WAAjB,CAA6Be,KAA7B,CAFF;MAID;;MAED,IAAMC,cAAc,GAAG;QACrBC,MAAM,EAAE,MADa;QAErBC,OAAO,EAAER,SAFY;QAGrBS,IAAI,EAAEN,UAHe;QAIrBO,QAAQ,EAAE;MAJW,CAAvB;MAOAjB,KAAK,CAAC,4DAAD,EAA+Da,cAA/D,CAAL,CACGZ,IADH,CACQ,UAACC,QAAD;QAAA,OAAcA,QAAQ,CAACgB,IAAT,EAAd;MAAA,CADR,EAEGjB,IAFH,CAEQ,UAACkB,MAAD,EAAY;QAChB,IAAMC,UAAU,GAAGtB,gBAAgB,CAACD,WAApC;QACAwB,OAAO,CAACC,GAAR,CAAYF,UAAZ;QACAC,OAAO,CAACC,GAAR,CAAY3B,WAAZ,EAHgB,CAIhB;;QACA,IAAM4B,cAAc,GAAG5B,WAAW,CAAC6B,MAAZ,CAAmB,UAACC,OAAD,EAAa;UACrD,IAAIL,UAAU,CAACM,QAAX,CAAoBD,OAAO,CAACE,EAA5B,CAAJ,EAAqC;YACnCN,OAAO,CAACC,GAAR,CAAYF,UAAU,CAACM,QAAX,CAAoBD,OAAO,CAACE,EAA5B,CAAZ;YACA,OAAO,KAAP;UACD,CAHD,MAGO;YACL,OAAO,IAAP;UACD;QACF,CAPsB,CAAvB,CALgB,CAchB;;QACA5B,mBAAmB,CAAC;UAAEF,WAAW,EAAE;QAAf,CAAD,CAAnB;QACAD,cAAc,CAAC2B,cAAD,CAAd;MACD,CAnBH,EAoBGK,KApBH,CAoBS,UAACC,KAAD;QAAA,OAAWR,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBO,KAArB,CAAX;MAAA,CApBT;IAqBD;EACF;;EAED,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;IAAA,oBACIA,KAAK,CAACC,MADV;IAAA,IAC3BC,IAD2B,iBAC3BA,IAD2B;IAAA,IACrBC,KADqB,iBACrBA,KADqB;IAAA,IACdC,IADc,iBACdA,IADc;IAAA,IACRC,OADQ,iBACRA,OADQ;IAGnC,IAAIC,mBAAmB,GAAGvC,gBAAgB,CAACD,WAA3C;IACAwC,mBAAmB,CAACC,IAApB,CAAyBJ,KAAzB;;IACA,IAAMK,mBAAmB,qBACpBzC,gBADoB,sBAEtBmC,IAFsB,EAEfI,mBAFe,EAAzB;;IAIAtC,mBAAmB,CAACwC,mBAAD,CAAnB;EACD;;EAED,IAAMC,kBAAkB,GAAG7C,WAAW,CAAC8C,GAAZ,CAAgB,UAAChB,OAAD,EAAa;IACtD,oBACE,oBAAC,WAAD;MACE,GAAG,EAAEA,OAAO,CAACE,EADf;MAEE,EAAE,EAAEF,OAAO,CAACiB,EAFd;MAGE,GAAG,EAAEjB,OAAO,CAACkB,GAHf;MAIE,IAAI,EAAElB,OAAO,CAACQ,IAJhB;MAKE,KAAK,EAAER,OAAO,CAACmB,KALjB;MAME,SAAS,EAAEnB,OAAO,CAACoB,uBANrB;MAOE,uBAAuB,EAAEf,oBAP3B;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF;EAWD,CAZ0B,CAA3B;EAcA,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,WAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,cAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,KAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,UAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,kBADF,CADF,CADF,eAME;IAAK,SAAS,EAAC,UAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD;IACE,EAAE,EAAC,cADL;IAEE,EAAE,EAAC,YAFL;IAGE,SAAS,EAAC,wBAHZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,SADF,CANF,eAeE;IAAK,SAAS,EAAC,UAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,EAAE,EAAC,oBADL;IAEE,SAAS,EAAC,uBAFZ;IAGE,OAAO,EAAEzB,iBAHX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBADF,CAfF,CADF,eA0BE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EA1BF,CADF,eA+BE;IAAM,MAAM,EAAC,EAAb;IAAgB,EAAE,EAAC,mBAAnB;IAAuC,MAAM,EAAC,MAA9C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,gBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAGGV,WAAW,CAACW,MAAZ,IAAsB,CAAtB,IAA2BkC,kBAH9B,CADF,CA/BF,CADF,CADF;AA2CD"},"metadata":{},"sourceType":"module"}